{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport apiClient from \"../services/api.js\";\nimport FullCalendar from \"@fullcalendar/vue3\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\"; // üìå ÎÇ†Ïßú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏Î•º ÏÇ¨Ïö©ÌïòÎ†§Î©¥ ÌïÑÏöî!\n\nexport default {\n  components: {\n    FullCalendar\n  },\n  data() {\n    return {\n      calendarOptions: {\n        plugins: [dayGridPlugin, interactionPlugin],\n        // üìå FullCalendar ÌîåÎü¨Í∑∏Ïù∏ Ï∂îÍ∞Ä\n        initialView: \"dayGridMonth\",\n        timeZone: \"local\",\n        // ‚úÖ FullCalendarÍ∞Ä Î°úÏª¨(KST) ÏãúÍ∞Ñ Í∏∞Ï§ÄÏúºÎ°ú ÌëúÏãúÌïòÎèÑÎ°ù ÏÑ§Ï†ï\n        displayEventTime: false,\n        // ‚úÖ ÏãúÍ∞Ñ ÌëúÏãúÎ•º Ï†úÍ±∞ÌïòÏó¨ ÎÇ†Ïßú Ïò§Î•ò Î∞©ÏßÄ\n        events: [],\n        eventClick: this.handleEventClick,\n        // ÏùºÏ†ï ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏\n        dateClick: this.handleDateClick // üìå ÎÇ†Ïßú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏\n      }\n    };\n  },\n  created() {\n    this.fetchDiaries();\n  },\n  methods: {\n    formatDate(created_at) {\n      if (!created_at) return null;\n      let date;\n\n      // ‚úÖ `created_at`Ïù¥ UNIX timestamp(Ï¥à Îã®ÏúÑ)Ïùº Í≤ΩÏö∞ Ï≤òÎ¶¨\n      if (!isNaN(created_at) && typeof created_at !== \"string\") {\n        date = new Date(Number(created_at) * 1000);\n      } else {\n        date = new Date(created_at);\n      }\n\n      // ‚úÖ `UTC ‚Üí KST` Î≥ÄÌôò\n      date.setMinutes(date.getMinutes() + date.getTimezoneOffset());\n      return date.toISOString().split(\"T\")[0]; // \"YYYY-MM-DD\" Î∞òÌôò\n    },\n    fetchDiaries() {\n      apiClient.get(\"/diary\").then(response => {\n        if (!response.data || !Array.isArray(response.data.data)) return;\n        const events = response.data.data.map(entry => ({\n          id: entry.id,\n          // ÏÉÅÏÑ∏ÌéòÏù¥ÏßÄ Ïù¥ÎèôÏùÑ ÏúÑÌï¥ ID Ìè¨Ìï®\n          title: entry.title,\n          start: this.formatDate(entry.created_at),\n          Prototype: entry.Prototype\n        }));\n        this.calendarOptions = {\n          ...this.calendarOptions,\n          events\n        };\n        this.$nextTick(() => {\n          if (this.$refs.calendar) {\n            this.$refs.calendar.getApi().refetchEvents();\n          }\n        });\n      }).catch(error => console.error(\"Error fetching diaries:\", error.message));\n    },\n    // ‚úÖ ÏùºÏ†ï ÌÅ¥Î¶≠ Ïãú ÏÉÅÏÑ∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô\n    handleEventClick(info) {\n      console.log(\"Clicked event:\", info.event);\n      const eventId = info.event.id;\n      if (eventId) {\n        this.$router.push(`/edit/${eventId}`);\n      }\n    },\n    // ‚úÖ ÎÇ†Ïßú ÌÅ¥Î¶≠ Ïãú ÎèôÏûë\n    handleDateClick(info) {\n      alert(`üìÖ ÏÑ†ÌÉùÌïú ÎÇ†Ïßú: ${info.dateStr}`);\n      console.log(\"Clicked Date Info:\", info);\n\n      // ÏÑ†ÌÉùÌïú ÎÇ†ÏßúÎ°ú Îã§Ïù¥Ïñ¥Î¶¨ ÏûëÏÑ± ÌéòÏù¥ÏßÄ Ïù¥Îèô\n      this.$router.push(`/create?date=${info.dateStr}`);\n    }\n  }\n};","map":{"version":3,"names":["apiClient","FullCalendar","dayGridPlugin","interactionPlugin","components","data","calendarOptions","plugins","initialView","timeZone","displayEventTime","events","eventClick","handleEventClick","dateClick","handleDateClick","created","fetchDiaries","methods","formatDate","created_at","date","isNaN","Date","Number","setMinutes","getMinutes","getTimezoneOffset","toISOString","split","get","then","response","Array","isArray","map","entry","id","title","start","Prototype","$nextTick","$refs","calendar","getApi","refetchEvents","catch","error","console","message","info","log","event","eventId","$router","push","alert","dateStr"],"sources":["/Users/ojaehyeon/Diary/diary-app-frontend/src/components/CalendarList.vue"],"sourcesContent":["<template>\n  <div>\n    <FullCalendar ref=\"calendar\" :options=\"calendarOptions\" />\n  </div>\n</template>\n\n<script>\nimport apiClient from \"../services/api.js\";\nimport FullCalendar from \"@fullcalendar/vue3\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\"; // üìå ÎÇ†Ïßú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏Î•º ÏÇ¨Ïö©ÌïòÎ†§Î©¥ ÌïÑÏöî!\n\nexport default {\n  components: {\n    FullCalendar,\n  },\n  data() {\n    return {\n      calendarOptions: {\n        plugins: [dayGridPlugin, interactionPlugin], // üìå FullCalendar ÌîåÎü¨Í∑∏Ïù∏ Ï∂îÍ∞Ä\n        initialView: \"dayGridMonth\",\n        timeZone: \"local\", // ‚úÖ FullCalendarÍ∞Ä Î°úÏª¨(KST) ÏãúÍ∞Ñ Í∏∞Ï§ÄÏúºÎ°ú ÌëúÏãúÌïòÎèÑÎ°ù ÏÑ§Ï†ï\n        displayEventTime: false, // ‚úÖ ÏãúÍ∞Ñ ÌëúÏãúÎ•º Ï†úÍ±∞ÌïòÏó¨ ÎÇ†Ïßú Ïò§Î•ò Î∞©ÏßÄ\n        events: [],\n        eventClick: this.handleEventClick, // ÏùºÏ†ï ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏\n        dateClick: this.handleDateClick, // üìå ÎÇ†Ïßú ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏\n      },\n    };\n  },\n  created() {\n    this.fetchDiaries();\n  },\n  methods: {\n    formatDate(created_at) {\n      if (!created_at) return null;\n\n      let date;\n\n      // ‚úÖ `created_at`Ïù¥ UNIX timestamp(Ï¥à Îã®ÏúÑ)Ïùº Í≤ΩÏö∞ Ï≤òÎ¶¨\n      if (!isNaN(created_at) && typeof created_at !== \"string\") {\n        date = new Date(Number(created_at) * 1000);\n      } else {\n        date = new Date(created_at);\n      }\n\n      // ‚úÖ `UTC ‚Üí KST` Î≥ÄÌôò\n      date.setMinutes(date.getMinutes() + date.getTimezoneOffset());\n\n      return date.toISOString().split(\"T\")[0]; // \"YYYY-MM-DD\" Î∞òÌôò\n    },\n    fetchDiaries() {\n      apiClient\n        .get(\"/diary\")\n        .then((response) => {\n          if (!response.data || !Array.isArray(response.data.data)) return;\n\n          const events = response.data.data.map(entry => ({\n            id: entry.id, // ÏÉÅÏÑ∏ÌéòÏù¥ÏßÄ Ïù¥ÎèôÏùÑ ÏúÑÌï¥ ID Ìè¨Ìï®\n            title: entry.title,\n            start: this.formatDate(entry.created_at),\n            Prototype: entry.Prototype,\n          }));\n\n          this.calendarOptions = { ...this.calendarOptions, events };\n\n          this.$nextTick(() => {\n            if (this.$refs.calendar) {\n              this.$refs.calendar.getApi().refetchEvents();\n            }\n          });\n        })\n        .catch(error => console.error(\"Error fetching diaries:\", error.message));\n    },\n    // ‚úÖ ÏùºÏ†ï ÌÅ¥Î¶≠ Ïãú ÏÉÅÏÑ∏ ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô\n    handleEventClick(info) {\n      console.log(\"Clicked event:\", info.event);\n      const eventId = info.event.id;\n      if (eventId) {\n        this.$router.push(`/edit/${eventId}`);\n      }\n    },\n    // ‚úÖ ÎÇ†Ïßú ÌÅ¥Î¶≠ Ïãú ÎèôÏûë\n    handleDateClick(info) {\n      alert(`üìÖ ÏÑ†ÌÉùÌïú ÎÇ†Ïßú: ${info.dateStr}`);\n      console.log(\"Clicked Date Info:\", info);\n      \n      // ÏÑ†ÌÉùÌïú ÎÇ†ÏßúÎ°ú Îã§Ïù¥Ïñ¥Î¶¨ ÏûëÏÑ± ÌéòÏù¥ÏßÄ Ïù¥Îèô\n      this.$router.push(`/create?date=${info.dateStr}`);\n    },\n  }\n};\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}